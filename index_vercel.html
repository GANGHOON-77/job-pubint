<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µê³µê¸°ê´€ ì±„ìš©ì •ë³´</title>
    <link rel="icon" href="data:,">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f6fa 0%, #e8eaf0 100%);
            color: #2c3e50;
            line-height: 1.6;
        }

        /* í—¤ë” */
        .header {
            background: #ffffff;
            color: #1565c0;
            padding: 30px 0 40px 0;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 40px;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .title-highlight {
            color: #1e3a8a;
            font-weight: 800;
        }
        
        .title-main {
            color: #3b82f6;
            font-weight: 800;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .load-btn {
            padding: 12px 24px;
            background: #2ed573;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .jobs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 18px;
            color: #64748b;
        }

        .spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <div class="header">
        <div class="header-content">
            <div>
                <h1>ğŸ¢ <span class="title-highlight">ëŒ€í•œë¯¼êµ­</span> <span class="title-main">ê³µê³µê¸°ê´€</span> <span class="title-highlight">ì±„ìš©ì •ë³´</span></h1>
                <p>ê³µê³µê¸°ê´€ ì±„ìš©ì •ë³´ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</p>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <div style="text-align: center; margin: 20px 0;">
            <button class="load-btn" onclick="loadJobs()">
                ğŸ“¥ ì±„ìš©ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
            </button>
        </div>

        <!-- ì±„ìš©ê³µê³  ê·¸ë¦¬ë“œ -->
        <div class="jobs-grid" id="jobsGrid">
            <div class="empty-state">
                <h3>ğŸ“‹ ì±„ìš©ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™€ì£¼ì„¸ìš”</h3>
                <p>ìƒë‹¨ì˜ 'ì±„ìš©ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìµœì‹  ê³µê³ ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
        </div>
    </div>

    <script>
        // Vercel API ê¸°ë³¸ URL
        const API_BASE_URL = window.location.hostname.includes('vercel.app') 
            ? window.location.origin 
            : 'http://localhost:8001';

        console.log('API Base URL:', API_BASE_URL);

        // ì±„ìš©ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadJobs() {
            const jobsGrid = document.getElementById('jobsGrid');
            
            jobsGrid.innerHTML = '<div class="loading"><div class="spinner"></div>ì±„ìš©ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>';
            
            try {
                // API í…ŒìŠ¤íŠ¸
                const response = await fetch(`${API_BASE_URL}/api/jobs?limit=50`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const jobs = await response.json();
                console.log('Loaded jobs:', jobs.length);
                
                // ë°ì´í„° í‘œì‹œ
                if (jobs.length > 0) {
                    displayJobs(jobs);
                } else {
                    jobsGrid.innerHTML = '<div class="empty-state"><h3>ğŸ“­ ë“±ë¡ëœ ì±„ìš©ê³µê³ ê°€ ì—†ìŠµë‹ˆë‹¤</h3></div>';
                }
                
            } catch (error) {
                console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', error);
                jobsGrid.innerHTML = `
                    <div class="empty-state">
                        <h3>âš ï¸ ì—°ê²° ì‹¤íŒ¨</h3>
                        <p>API ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="color: #666; font-size: 14px; margin-top: 10px;">
                            ${error.message}
                        </p>
                    </div>
                `;
            }
        }

        // ì±„ìš©ê³µê³  í‘œì‹œ
        function displayJobs(jobs) {
            const jobsGrid = document.getElementById('jobsGrid');
            
            const jobCards = jobs.slice(0, 20).map(job => `
                <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <h3 style="color: #1565c0; margin-bottom: 10px; font-size: 16px;">${job.title || 'ì œëª© ì—†ìŒ'}</h3>
                    <p style="color: #666; margin-bottom: 8px;">ğŸ¢ ${job.dept_name || 'ê¸°ê´€ëª… ì—†ìŒ'}</p>
                    <p style="color: #666; margin-bottom: 8px;">ğŸ“ ${job.work_region || 'ì§€ì—­ ì •ë³´ ì—†ìŒ'}</p>
                    <p style="color: #666; margin-bottom: 8px;">ğŸ‘¥ ${job.recruit_num || '?'}ëª… ì±„ìš©</p>
                    <p style="color: #888; font-size: 12px;">ë“±ë¡: ${job.reg_date || 'ë‚ ì§œ ì—†ìŒ'} | ë§ˆê°: ${job.end_date || 'ë‚ ì§œ ì—†ìŒ'}</p>
                </div>
            `).join('');
            
            jobsGrid.innerHTML = jobCards;
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œë¨');
            // ìë™ìœ¼ë¡œ ë°ì´í„° ë¡œë“œí•˜ì§€ ì•ŠìŒ (ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­)
        });
    </script>
</body>
</html>